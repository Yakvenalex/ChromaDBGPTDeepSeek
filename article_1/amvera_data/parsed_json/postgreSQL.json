{
    "text": "postgresql облако amvera поддерживает создание управляемого кластера postgres с одной или несколькими запущенными репликами субд создание кластера происходит в несколько простых шагов разворачивание managed кластера 1 на главной странице выбрать postgresql 2 нажать на кнопку создать базу данных 3 задать название проекта выбрать подходящий тариф postgresql new img postgresql png eval rst admonition внимание class attention стабильная работа возможна на тарифах не ниже начальный 4 задать параметры субд postgresql eval rst admonition внимание class attention имя базы данных и имя пользователя postgres зарезервировано и не могут быть указаны имя создаваемой бд имя для базы данный которая будет создана в кластере имя пользователя имя для пользователя под которым будет реализовываться вход в субд пароль пользователя пароль для указанного выше пользователя под которым будет реализовываться вход в субд размер кластера субд количество реплик субд при этом одна из реплик будет мастером и в связи с особенностями субд доступ на запись будет доступен только через неё eval rst admonition важно class warning тарификация происходит отдельно за каждую реплику согласно выбранному тарифу активировать superuser access активировать доступ суперпользователя с именем пользователя postgres пароль для superuser пароль для пользователя postgres под которым возможен вход в субд с правами суперпользователя 5 нажать кнопку завершить и дождаться перехода кластера в статус postgresql запущен подключение к кластеру для доступа к базе данных из других проектов амвера достаточно указать одно из трех доменных имен для чтения записи amvera username cnpg project name rw только для чтения в режиме hot standby amvera username cnpg project name ro для чтения с произвольной из развернутых нод amvera username cnpg project name r для доступа к базе данных из сети интернет необходимо создать доменное имя applications configuration network md с типом postgres клиент которым будет выполняться подключения к бд должен поддерживать ssl eval rst admonition важно class attention при подключении из локального pgadmin укажите это доменное имя без https вначале в pgadmin desktop указывается host name project name username db msk0 amvera tech ssl mode prefer eval rst admonition внимание class attention рекомендуется использовать версию pgadmin не выше 8 12 поскольку версии выше используют v17 libpq именно на этой версии при попытке подключиться к бд возвращается ошибка ssl error tlsv1 alert no application protocol eval rst admonition внимание class attention если у вас не получается подключиться с использованием pgadmin используйте dbeaver развертывание pgadmin eval rst youtube qfgv3qsdye8 align center width 100 1 создать преднастроенный сервис с подходящим тарифом 1 на главной странице выбираем преднастроенные сервисы 2 нажимаем кнопку создать преднастроенный сервис и задаем утилиты для баз данных как параметры сервиса и pgadmin как тип сервиса 3 жмем далее и вводим произвольное название проекта eval rst admonition внимание class attention для работы pgadmin требуется контейнер с тарифом не ниже начальный 4 указать необходимые параметры окружения при развертывании используется образ https hub docker com r dpage pgadmin4 docker dpage pgadmin4 meta toolchain version eval rst admonition внимание class attention рекомендуется использовать версию не выше 8 12 поскольку версии выше используют v17 libpq именно на этой версии при попытке подключиться к бд возвращается ошибка ssl error tlsv1 alert no application protocol в разделе переменные у проекта необходимо задать следующие переменные окружения applications configuration variables md переменная pgadmin default email почта администратора pgadmin секрет pgadmin default password пароль для доступа к pgadmin не имеет ничего общего с паролем от бд настройка pgadmin 1 в разделе настройки приложения активируем бесплатное доменное имя applications configuration network md бесплатное доменное имя амвера или добавляем свое applications configuration network md свое доменное имя db create img pgadmin domain png 2 дожидаемся окончания привязки доменного имени и переходим по нему 3 вводим данные для входа в pgadmin 4 слева правой кнопкой мыши server register server 5 в окне в разделе general указываем название для подключаемой бд в разделе connection указываем host name address внутреннее доменное имя проекта с postgresql подключение к кластеру внутреннее доменное имя вы можете найти на странице инфо субд maintenance database название бд по умолчанию postgres username имя пользователя которое указывалось на этапе создания субд если был активирован superuser то может быть как ваш так и postgres важно учесть регистр password пароль указанного выше пользователя важно учесть регистр 6 нажимаем кнопку save eval rst admonition хитрость class hint чтобы экономить на потреблении проекта с pgadmin рекомендуем ставить его на паузу после окончания работы бэкапы бэкапы по расписанию сервис предоставляет возможность создания бесплатных бэкапов по расписанию бэкапы начнут создаваться со следующего дня в час их активации сервис хранит крайние ins три ins бэкапа eval rst admonition важно class warning после остановки кластера ежедневные бэкапы будут отключены не забудьте активировать их после запуска кластера бэкапы по клику для создания бэкапа нажмите на кнопку создать бэкап и введите его описание чтобы отличить его от других имя бэкапа будет сгенерировано автоматически максимально вы можете создать ins три ins бэкапа они также являются бесплатными backups img postgresql backups png восстановление кластера eval rst admonition внимание class attention после восстановления кластера будет создан новый сервис для подключения к восстановленному кластеру не забудьте изменить url в вашем проекте пользователь и пароли будут восстановлены автоматически восстановить кластер можно по клику на иконку необходимого бэкапа если восстановление идет более 20 минут время зависит от размера бд то обратитесь в поддержку restore img postgresql restore png",
    "metadata": {
        "file_name": "postgreSQL.md",
        "section_count": 11,
        "section_1": "PostgreSQL",
        "section_2": "Разворачивание managed-кластера",
        "section_3": "Подключение к кластеру",
        "section_4": "Развертывание pgAdmin",
        "section_5": "1. Создать преднастроенный сервис с подходящим тарифом.",
        "section_6": "4. Указать необходимые параметры окружения.",
        "section_7": "Настройка pgAdmin",
        "section_8": "Бэкапы",
        "section_9": "Бэкапы по расписанию",
        "section_10": "Бэкапы по клику",
        "section_11": "Восстановление кластера"
    }
}