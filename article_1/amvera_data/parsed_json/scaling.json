{
    "text": "масштабирование ресурса можно запускать несколько инстансов контейнера одного ресурса приложения или субд это может быть нужно для повышения отказоустойчивости проекта и распределения нагрузки между инстансами eval rst admonition внимание class attention не каждый сайт бот или веб приложение может эффективно работать будучи запущенным в нескольких экземплярах ситуации требующие масштабирования приведем примеры того как можно переработать приложение чтобы поддерживать работу в нескольких экземплярах эти примеры упрощены и их стоит рассматривать только как отправную точку в проектировании масштабируемых приложений пример 1 телеграм бот работает в режиме опроса если запустить его в нескольких экземплярах то каждый из них будет получать одни и те же события от телеграма следовательно бот будет реагировать на событие столько раз сколько инстансов его запущено это чаще всего является ошибкой и примером приложения не поддерживающего горизонтальное масштабирование что можно сделать можно переключить бота из режима опроса в режим веб хуков в этом случае не бот будет запрашивать события телеграма а телеграм будет отправлять события боту эти события будет получать балансировщик нагрузки amvera и распределять их по экземлпярам бота так бот будет реагировать только один раз на одно событие следовательно ошибка будет устранена и приложение может поддерживать горизонтальное масштабирование пример 2 интернет магазин хранит корзину пользователя в оперативной памяти если такой интернет магазин запустить в двух экземплярах часть запросов будет приходить в один экземпляр а часть во второй так у пользователя может формироваться две разные корзины и между перезагрузками страницы пользователь будет видеть то одну то другую это является ошибкой и примером приложения не поддерживающего горизонтальное масштабирование что можно сделать можно подключить базу данных лучше всего или хотя бы хранение корзины пользователя в файлах доступных всем экземплярам приложения в этом случае в какой бы экземпляр интернет магазина ни пришел бы запрос работать он будет с одной и той же корзиной следовательно ошибка будет устранена и приложение может поддерживать горизонтальное масштабирование изменение количества реплик когда вы убедились что ваше приложение поддерживает горизонтальное масштабирование вы можете увеличить количество экземпляров на странице проекта после того как вы указали требуемое количество экземпляров нажмите на кнопку применить scaling img scaling png после масштабирования приложения отобразиться нужное количество инстансов если отображение не происходит перезагрузите страницу браузера scaled img scaled png после нажатия на кнопку будут запущены дополнительные контейнеры или остановлены лишние на запуск и остановку контейнеров требуется время поэтому текущее количество контейнеров изменится в течение нескольких минут если выставить количество контейнеров в 0 то проект будет полностью остановлен и за него не будут списываться средства",
    "metadata": {
        "file_name": "scaling.md",
        "section_count": 3,
        "section_1": "Масштабирование ресурса",
        "section_2": "Ситуации, требующие масштабирования",
        "section_3": "Изменение количества реплик"
    }
}